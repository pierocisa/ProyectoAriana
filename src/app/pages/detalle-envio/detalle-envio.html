<section class="envio-con-resumen">
  <div class="columna-formulario">
    <h2>Detalles de Envío</h2>
    <form #f="ngForm" (ngSubmit)="enviarPedido(f)">
      <div class="form-campos">
        <input  name="nombre"       ngModel required placeholder="Nombre *" />
        <input  name="apellido"     ngModel required placeholder="Apellido *" />
        <input  name="dni"          ngModel required placeholder="DNI *" />
        <input  name="telefono"     ngModel required placeholder="Teléfono *" />

        <select name="departamento" ngModel required>
          <option value="">Departamento *</option>
          <option>Apurímac</option><option>Cusco</option><option>Lima</option>
        </select>

        <select name="provincia" ngModel required>
          <option value="">Provincia *</option>
          <option>Abancay</option><option>Cusco</option>
        </select>

        <select name="distrito" ngModel required>
          <option value="">Distrito *</option>
          <option>Tamburco</option><option>Wanchaq</option>
        </select>

        <input name="direccion"    ngModel required placeholder="Dirección exacta *" />
        <input name="ciudad"       ngModel required placeholder="Ciudad *" />
        <input name="codigoPostal" ngModel required placeholder="Código Postal *" />

        <select name="comprobante" ngModel required>
          <option value="">Comprobante *</option>
          <option>Boleta</option><option>Factura</option>
        </select>

        <label class="guardar-linea">
          <input name="guardar" type="checkbox" ngModel />
          Guardar esta dirección para futuras compras
        </label>
      </div>

      <button type="submit" class="boton-continuar" [disabled]="f.invalid">
        ➡ Continuar
      </button>
    </form>
  </div>

  <aside class="resumen-pedido">
    <h3>Resumen del Pedido</h3>

    <div *ngFor="let item of carrito; index as i" class="producto-linea">
      <div class="producto-info">
        <img [src]="item.imagen" class="miniatura" alt="{{item.nombre}}" />
        <div class="producto-texto">
          <span>{{item.nombre}}</span>
          <span>x{{item.cantidad}}</span>
        </div>
      </div>
      <div class="producto-precio">
        {{ (item.precio * item.cantidad) | currency:'PEN' }}
        <button type="button" (click)="eliminarItem(i)" title="Eliminar">✕</button>
      </div>
    </div>

    <div class="linea-separador"></div>

    <div class="resumen-totales">
      <div class="linea-total">
        <span>Subtotal</span>
        <span>{{subtotal | currency:'PEN'}}</span>
      </div>
      <div class="linea-total">
        <span>IGV (10%)</span>
        <span>{{igv | currency:'PEN'}}</span>
      </div>
      <div class="linea-total total-final">
        <strong>Total</strong>
        <strong>{{total | currency:'PEN'}}</strong>
      </div>
    </div>
  </aside>
</section>

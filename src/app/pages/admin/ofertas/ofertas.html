<section class="ofertas-panel">
  <h2>ğŸ GestiÃ³n de Promociones</h2>

  <div class="acciones-ofertas">
    <button (click)="abrirModal()" class="btn-crear">â• Nueva PromociÃ³n</button>
  </div>

  <!-- Loader -->
  <div *ngIf="cargando" class="loader">
    â³ Cargando promociones...
  </div>

  <!-- Sin promociones -->
  <div *ngIf="!cargando && promociones.length === 0" class="sin-datos">
    ğŸ“­ No hay promociones registradas aÃºn.
  </div>

  <!-- Tabla de promociones -->
  <table *ngIf="!cargando && promociones.length > 0" class="tabla-ofertas">
    <thead>
      <tr>
        <th>TÃ­tulo</th>
        <th>DescripciÃ³n</th>
        <th>Descuento</th>
        <th>Imagen</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let promo of promociones">
        <td>{{ promo.titulo }}</td>
        <td>{{ promo.descripcion }}</td>
        <td><strong>{{ promo.descuento }}%</strong></td>
        <td>
          <img *ngIf="promo.imagen; else sinImagen" [src]="promo.imagen" alt="Imagen Promo" />
          <ng-template #sinImagen>
            <span class="texto-sin-imagen">Sin imagen</span>
          </ng-template>
        </td>
        <td class="acciones">
          <button class="btn-detalles" (click)="abrirModal(promo)">âœï¸ Editar</button>

        <button class="btn-eliminar" (click)="eliminarPromocion(promo)">ğŸ—‘ï¸ Eliminar</button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Modal -->
  <div class="modal-bg" *ngIf="modalActivo">
    <div class="modal">
      <h3>{{ editandoId ? 'âœï¸ Editar PromociÃ³n' : 'ğŸ Nueva PromociÃ³n' }}</h3>

      <label for="titulo">ğŸ¯ TÃ­tulo:</label>
      <input id="titulo" type="text" [(ngModel)]="nuevaPromocion.titulo" />

      <label for="descripcion">ğŸ“ DescripciÃ³n:</label>
      <textarea id="descripcion" [(ngModel)]="nuevaPromocion.descripcion"></textarea>

      <label for="descuento">ğŸ’¸ Descuento (%):</label>
      <input id="descuento" type="number" [(ngModel)]="nuevaPromocion.descuento" min="0" max="100" />

      <label for="imagen">ğŸ–¼ï¸ Imagen:</label>
      <input type="file" accept="image/*" (change)="cargarImagen($event)" />

      <div *ngIf="nuevaPromocion.imagen" class="imagen-preview">
        <img [src]="nuevaPromocion.imagen" alt="Vista previa" />
      </div>

      <div class="acciones-modal">
        <button class="btn-guardar" (click)="guardarPromocion()">ğŸ’¾ Guardar</button>
        <button class="btn-cancelar" (click)="cerrarModal()">âŒ Cancelar</button>
      </div>
    </div>
  </div>
</section>
